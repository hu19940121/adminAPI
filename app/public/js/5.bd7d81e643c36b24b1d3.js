webpackJsonp([5],{EQIZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),o=a("TIfe"),l=a("nKD6"),r=a("ZlPB"),s={data:function(){return{tableData:[],loading:!0,dialogFormVisible:!1,dialogFormTitle:"新增电影类型",form:{name:"",summary:"",channelId:""},formLabelWidth:"120px",operationType:1,currentPage:1,pageSize:4,count:0,channelList:[]}},created:function(){this.getList(),this.getChannelList()},methods:{filterChannel:function(e){for(var t=this.channelList,a=0;a<t.length;a++)if(t[a].id===e)return t[a].name},clearData:function(){this.form={name:"",summary:"",channelId:""},this.dialogFormTitle="新增电影类型"},getChannelList:function(){var e=this,t={token:Object(o.a)()};Object(r.c)(t).then(function(t){e.channelList=t.data})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e),this.loading=!0,this.currentPage=e,this.getList()},getList:function(){var e=this,t={pageIndex:this.currentPage,pageSize:this.pageSize},a=i()({token:Object(o.a)()},t);Object(l.d)(a).then(function(t){e.loading=!1,e.tableData=t.data,e.count=t.count})},del:function(e){var t=this;this.$confirm("此操作将永久删除是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.b)(e).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})})},edit:function(e){var t=this;this.operationType=2,this.dialogFormTitle="编辑视频类型",this.dialogFormVisible=!0,Object(l.c)(e).then(function(e){t.form=e.data})},add:function(){var e=this;1===this.operationType?Object(l.a)(this.form).then(function(t){2e4===t.code&&(e.$message.success(t.message),e.dialogFormVisible=!1,e.getList())}):Object(l.e)(this.form).then(function(t){2e4===t.code&&(e.$message.success(t.message),e.dialogFormVisible=!1,e.getList())})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"videoCate"},[a("div",{staticClass:"main"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("视频类型列表")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"medium"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增视频类型")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"视频类型名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelId",label:"所属频道"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.filterChannel(t.row.channelId))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"summary",label:"简介"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},readonly:!0},model:{value:t.row.summary,callback:function(a){e.$set(t.row,"summary",a)},expression:"scope.row.summary"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.del(t.row.id)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.edit(t.row.id)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[4,8,12,16],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.clearData}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"类型名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属频道","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.channelId,callback:function(t){e.$set(e.form,"channelId",t)},expression:"form.channelId"}},e._l(e.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"类型简介","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入类型简介",autosize:{minRows:2,maxRows:4}},model:{value:e.form.summary,callback:function(t){e.$set(e.form,"summary",t)},expression:"form.summary"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,d,!1,function(e){a("lHXs")},"data-v-5d03a7a2",null);t.default=c.exports},Qxxk:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.videoCate[data-v-5d03a7a2] {\n  padding-left: 40px;\n  padding-top: 50px;\n}\n.videoCate .main[data-v-5d03a7a2] {\n    width: 80%;\n}\n.videoCate .avatar-uploader .el-upload[data-v-5d03a7a2] {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n.videoCate .avatar-uploader .el-upload[data-v-5d03a7a2]:hover {\n    border-color: #409EFF;\n}\n.videoCate .avatar-uploader-icon[data-v-5d03a7a2] {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n    border: 1px dashed #d9d9d9;\n}\n.videoCate .avatar[data-v-5d03a7a2] {\n    width: 178px;\n    height: 178px;\n    display: block;\n}\n",""])},lHXs:function(e,t,a){var n=a("Qxxk");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("64c9a678",n,!0)},nKD6:function(e,t,a){"use strict";t.d=function(e){return Object(n.a)({url:"/api/v1/videoCate/list",method:"get",params:e})},t.a=function(e){return Object(n.a)({url:"/api/v1/videoCate/add",method:"POST",data:e})},t.b=function(e){return Object(n.a)({url:"/api/v1/videoCate/del",method:"get",params:{id:e}})},t.c=function(e){return Object(n.a)({url:"/api/v1/videoCate/getItemById",method:"get",params:{id:e}})},t.e=function(e){return Object(n.a)({url:"/api/v1/videoCate/update",method:"post",data:e})};var n=a("vLgD")}});